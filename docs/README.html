<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Tim Hake" />
  <meta name="dcterms.date" content="2023-01-30" />
  <title>Usage</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="pydoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<center>
<p><a href="__init__.html">Introduction</a> - <a
href="Snha.html">Snha</a> - <a href="SnhaDataGen.html">SnhaDataGen</a> -
<a href="SnhaDir.html">SnhaDir</a> - <a
href="SnhaNewGraph.html">SnhaNewGraph</a> - <a
href="SnhaPlot.html">SnhaPlot</a> - <a href="__main__.html">CLI</a> - <a
href="README.html">Usage</a></p>
</center>
<header id="title-block-header">
<h1 class="title">Usage</h1>
<p class="author">Tim Hake</p>
<p class="date">2023-01-30</p>
</header>
<h1 id="snha4py">snha4py</h1>
<p>Snha4py is a python implementation of the St. Nicholas House
algorithm (<a
href="https://doi.org/10.1127/anthranz/2019/1027"><em>Groth et
al. 2019</em></a>, <a
href="https://doi.org/10.3390%2Fijerph18041741"><em>Hermanussen et
al. 2021</em></a>, <em>Hake et al. 2023</em>). The algorithm infers a
graph based on the correlation coefficient between variables of a data
set. Here, the nodes and the edges would be the variables of the data
set and the correlation coefficient, respectively. The correlation
coefficient is evaluated in terms of association chains. Therfore, the
absolute coefficient is ranked and compared pairwise. An association
chain is characterized by a sequence of variables for which reversing
the start and end point does not change the order of elements. These
chains then build the graph.</p>
<p>Next, to the algorithm the package offers a variety of graph
implementations, as well as a vizualization routine for the graphs and
the correlation matrix.</p>
<p>Also, a module to create correlated data along a directed graph based
on a Monte Carlo approach is included (<a
href="https://doi.org/10.52905/hbph2021.3.26"><em>Novine et
al. 2022</em></a>).</p>
<p>You can use the St. Nicolas House algorithm and other features of the
package as a <a href="#comando-line-interface">comando-line interface
(CLI)</a> or you can <a href="#as-import-in-your-own-code">import the
package</a> in your own code.</p>
<h1 id="documentation">Documentation</h1>
<ul>
<li><a
href="https://htmlpreview.github.io/?https://github.com/thake93/snha4py/blob/main/docs/__init__.html">HTML</a></li>
<li><a
href="https://github.com/thake93/snha4py/blob/main/docs/Snha.html">Markdown</a></li>
</ul>
<h1 id="install">Install</h1>
<pre><code>pip install snha4py</code></pre>
<pre><code>pip3 install git+https://github.com/thake93/snha4py.git --user</code></pre>
<p>after the installation you should be able to run:</p>
<pre class="shell"><code>pip show snha4py</code></pre>
<h1 id="create-your-1st-st.-nicolas-house">Create your 1<sup>st</sup>
“St. Nicolas House”</h1>
<h2 id="comando-line-interface">Comando-line interface</h2>
<p>We start with creating a directory to store the test files.</p>
<pre class="shell"><code>mkdir test_snha
cd test_snha</code></pre>
<p>In the first place we create test data in two steps:</p>
<ol type="1">
<li>We create a directed graph.</li>
</ol>
<pre class="shell"><code>python3 -m snha4py --create-graph -t werner -o werner.csv</code></pre>
<ol start="2" type="1">
<li>We create correlated data along the edges of the graph.</li>
</ol>
<pre class="shell"><code>python3 -m snha4py --create-data --graph werner.csv -o data.csv --steps 25 --iterations 200 --plot</code></pre>
<p>Now, we can run the algortihm to predict the graph based on the
correlation of the data.</p>
<pre class="shell"><code>python3 -m snha4py --snha --data data.csv -o graph_pred.csv -p</code></pre>
<p>Also, we are able to apply bootstrapping to increase the prediction
(<em>Hake et al. (2023)</em>).</p>
<pre class="shell"><code>python3 -m snha4py --snha --data data.csv -o graph_pred_bt.csv --bootstrap -i 10 -p</code></pre>
<p><strong>Note</strong>: The result might differ from the picture
below.</p>
<h2 id="as-import-in-your-own-code">As import in your own code</h2>
<pre class="shell"><code>python3</code></pre>
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Python <span class="fl">3.</span><span class="er">x</span>.xx ()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> snha4py.Snha <span class="im">import</span> Snha</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s <span class="op">=</span> Snha()</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.new_graph()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.create_corr_data(<span class="dv">200</span>,<span class="dv">25</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.comp_corr(method<span class="op">=</span><span class="st">&#39;spearman&#39;</span>)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.st_nich_alg()</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> fig,ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">3</span>, figsize<span class="op">=</span>(<span class="dv">30</span>,<span class="dv">10</span>))</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.plot_graph(pred<span class="op">=</span><span class="va">False</span>, ax<span class="op">=</span>ax[<span class="dv">0</span>])</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.plot_corr(ax<span class="op">=</span>ax[<span class="dv">1</span>])</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s.plot_graph(ax<span class="op">=</span>ax[<span class="dv">2</span>])</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> ax[<span class="dv">0</span>].set_title(<span class="st">&#39;True Graph&#39;</span>)</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> ax[<span class="dv">1</span>].set_title(<span class="st">&#39;Correlation Coefficient&#39;</span>)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> ax[<span class="dv">2</span>].set_title(<span class="st">&#39;Predicted Graph&#39;</span>)</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> plt.show()</span></code></pre></div>
<div data-align="center">
<p><img src="https://github.com/thake93/snha4py/blob/main/examples/example.png"></p>
</div>
<h1 id="references">References</h1>
<p>Groth, D., Scheffler, C., and Hermanussen, M. (2019). Body height in
stunted indonesian children depends directly on parental education and
not via a nutrition mediated pathway - evidence from tracing association
chains by st. nicolas house analysis. <em>Anthropologischer
Anzeiger</em>, 76(5):445–451. <a
href="https://doi.org/10.1127/anthranz/2019/1027">DOI</a></p>
<p>Hake, T., Bodenberger, B., Groth, D. (2023). In Python available:
St. Nicolas House Algorithm (SNHA) with bootstrap support for improved
performance in dense networks. <em>Human Biology and Public Health</em>
4.</p>
<p>Hermanussen, M., Aßmann, C., and Groth, D. (2021). Chain reversion
for detecting associations in interacting variables—st. nicolas house
analysis. <em>International Journal of Environmental Research and Public
Health</em>, 18(4). <a
href="https://doi.org/10.3390%2Fijerph18041741">DOI</a></p>
<p>Novine, M., Mattsson, C. C., &amp; Groth, D. (2022). Network
reconstruction based on synthetic data generated by a Monte Carlo
approach. <em>Human Biology and Public Health, 3</em>. <a
href="https://doi.org/10.52905/hbph2021.3.26">DOI</a></p>
<h1 id="license">License</h1>
<p><a href="https://github.com/thake93/snha4py/blob/main/LICENSE">MIT
License</a></p>
</body>
</html>
